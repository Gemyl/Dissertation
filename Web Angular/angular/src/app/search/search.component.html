<html>
    <head>
    </head>
    <body>
        <div class="form-container" *ngIf="!dataLoaded">
            <form #searchForm="ngForm" (ngSubmit)="onSubmit(searchForm)">
                <div class="row">
                    <div class="column">
                        <p>Keywords</p>
                        <section id="keywords-section"> 
                            <input type="text" name="keyword" placeholder="Enter Keyword" size="25" ngModel><br>                       
                            <div #dynamicInputs *ngFor="let set of keywordSets; let i = index">
                                <select name="boolean{{i}}" style="margin-top: 5px" ngModel="AND">
                                    <option>AND</option>
                                    <option>OR</option>
                                    <option>AND NOT</option>
                                </select><br>
                                <input type="text" name="keyword{{i}}" placeholder="Enter Keyword" size="25" ngModel>
                                <button class="fa fa-trash" (click)="removeSet(i)"></button><br>
                            </div>
                            <button class="fa fa-plus" type="button" (click)="addSet()"></button>
                        </section>
                    </div>
                    <div class="column">
                        <p>Years Range</p>
                        <input type = "text" name = "years1" placeholder = "Enter First Year" size = "20"
                        style="margin-right: 10px;" ngModel>
                        <input type = "text" name = "years2" placeholder = "Enter Last Year" size = "20"
                        ngModel><br><br>
                        <p>Fields</p>
                        <section id="fields-section">
                            <div *ngFor="let option of options">
                                <input type="checkbox" [name]="option.name" [(ngModel)]="option.selected">
                                <label>{{option.name}}</label>
                            </div>
                        </section><br><br>
                        <div class="button-container">
                            <button class="btn" type="submit"> Submit </button>
                        </div>
                    </div>
                </div>            
            </form>
        </div>
        <ng-container *ngIf="dataLoaded">
            <div class="table-container">
                <div style="display: flex; justify-content: center;">
                    <label style="font-weight: lighter; font-size: large;">No Data</label>
                </div>
                <table mat-table [dataSource]="data">
                <ng-container matColumnDef="doi">
                    <th mat-header-cell *matHeaderCellDef>DOI</th>
                    <td mat-cell *matCellDef="let d">{{d.doi}}</td>
                </ng-container>
                <ng-container matColumnDef="citations">
                    <th mat-header-cell *matHeaderCellDef>Citations</th>
                    <td mat-cell *matCellDef="let d">{{d.citations}}</td>
                </ng-container>
                <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                <tr mat-row *matRowDef="let myRowData; columns: displayedColumns"></tr>
                </table>
                <div style="display: flex; justify-content: center;">
                    <mat-paginator 
                        #paginator
                        [length]="data.length" 
                        [pageSize]="pageSize" 
                        [pageIndex]="pageIndex"
                        [pageSizeOptions]="pageSizeOptions">
                    </mat-paginator>
                </div>
                <div class="button-container" style="margin: 15px;">
                    <button #exportButton class="btn btn-secondary" type="button" (click)="exportAsExcel()">
                    <i class="fas fa-file-excel" style="color: white;"></i> Export As Excel</button>
                </div>
            </div>
        </ng-container>
    </body>
</html>
